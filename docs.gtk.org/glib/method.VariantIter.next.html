<!--
SPDX-FileCopyrightText: GLib Development Team

SPDX-License-Identifier: LGPL-2.1-or-later
--><!DOCTYPE html><html lang="en"><!-- Mirrored from docs.gtk.org/glib/method.VariantIter.next.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 24 Nov 2024 14:17:21 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->

  <title>GLib.VariantIter.next</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta charset="utf-8">

  
  <meta property="og:type" content="website">

  

  
  <meta priority="og:title" content="GLib.VariantIter.next">
  <meta priority="og:description" content="Reference for GLib.VariantIter.next">
  <meta name="twitter:title" content="GLib.VariantIter.next">
  <meta name="twitter:description" content="Reference for GLib.VariantIter.next">


  
  <meta name="twitter:card" content="summary">

  
  
  
  <link rel="search" type="application/opensearchdescription+xml" title="GLib" href="opensearch.xml">
  
  

  <link rel="stylesheet" href="style.css" type="text/css">

  

  
  <script src="urlmap.js"></script>
  
  
  <script src="fzy.js"></script>
  <script src="search.js"></script>
  
  <script src="main.js"></script>

  
</head>

<body>
  <div id="body-wrapper" tabindex="-1">

    

    <button id="btn-to-top" class="hidden"><span class="up-arrow"></span></button>

    
<section id="main" class="content">
  <header>
    <h3>Method</h3>
    <h1><a href="index-2.html">GLib</a><span class="sep"></span><a href="struct.VariantIter.html">VariantIter</a><span class="sep"></span>next</h1>
  </header>

  <section>
    <div class="docblock">
      <p><span class="emblem available">since: 2.24</span></p>
    </div>

    <div class="declaration toggle-wrapper">
      <h4 style="display:flex;" id="declaration">
        Declaration
        <a class="anchor" href="#declaration"></a>
        
        <a class="srclink" title="go to source location" href="https://gitlab.gnome.org/GNOME/glib/-/blob/main/glib/gvariant.h#L290">[src]</a>
        
      </h4>

      <div class="docblock c-decl">
        <pre><code><div class="highlight"><pre><span></span><span class="n">gboolean</span>
<span class="n">g_variant_iter_next</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n">GVariantIter</span><span class="o">*</span><span class="w"> </span><span class="n">iter</span><span class="p">,</span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">gchar</span><span class="o">*</span><span class="w"> </span><span class="n">format_string</span><span class="p">,</span>
<span class="w">  </span><span class="p">...</span>
<span class="p">)</span>
</pre></div>
</code></pre>
      </div>
    </div>

    <div class="description toggle-wrapper">
      <h4 style="display:flex;" id="description">
        Description
        <a class="anchor" href="#description"></a>
        
        <a class="srclink" title="go to source location" href="https://gitlab.gnome.org/GNOME/glib/-/blob/main/glib/gvariant.c#L5750">[src]</a>
        
      </h4>

      <div class="docblock">
        <p>Gets the next item in the container and unpacks it into the variable
argument list according to <code>format_string</code>, returning <code>TRUE</code>.</p>
<p>If no more items remain then <code>FALSE</code> is&nbsp;returned.</p>
<p>All of the pointers given on the variable arguments list of this
function are assumed to point at uninitialised memory.  It is the
responsibility of the caller to free all of the values returned by
the unpacking&nbsp;process.</p>
<p>Here is an example for memory management with&nbsp;g_variant_iter_next():</p>
<div class="highlight"><pre><span></span><span class="w">  </span><span class="c1">// Iterates a dictionary of type 'a{sv}'</span>
<span class="w">  </span><span class="kt">void</span>
<span class="w">  </span><span class="nf">iterate_dictionary</span><span class="w"> </span><span class="p">(</span><span class="n">GVariant</span><span class="w"> </span><span class="o">*</span><span class="n">dictionary</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="n">GVariantIter</span><span class="w"> </span><span class="n">iter</span><span class="p">;</span>
<span class="w">    </span><span class="n">GVariant</span><span class="w"> </span><span class="o">*</span><span class="n">value</span><span class="p">;</span>
<span class="w">    </span><span class="n">gchar</span><span class="w"> </span><span class="o">*</span><span class="n">key</span><span class="p">;</span>

<span class="w">    </span><span class="n">g_variant_iter_init</span><span class="w"> </span><span class="p">(</span><span class="o">&amp;</span><span class="n">iter</span><span class="p">,</span><span class="w"> </span><span class="n">dictionary</span><span class="p">);</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">g_variant_iter_next</span><span class="w"> </span><span class="p">(</span><span class="o">&amp;</span><span class="n">iter</span><span class="p">,</span><span class="w"> </span><span class="s">"{sv}"</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">value</span><span class="p">))</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="n">g_print</span><span class="w"> </span><span class="p">(</span><span class="s">"Item '%s' has type '%s'</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="w"> </span><span class="n">key</span><span class="p">,</span>
<span class="w">                 </span><span class="n">g_variant_get_type_string</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="p">));</span>

<span class="w">        </span><span class="c1">// must free data for ourselves</span>
<span class="w">        </span><span class="n">g_variant_unref</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
<span class="w">        </span><span class="n">g_free</span><span class="w"> </span><span class="p">(</span><span class="n">key</span><span class="p">);</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
</pre></div>

<p>For a solution that is likely to be more convenient to C programmers
when dealing with loops, see&nbsp;g_variant_iter_loop().</p>
<p><code>format_string</code> determines the C types that are used for unpacking
the values and also determines if the values are copied or&nbsp;borrowed.</p>
<p>See the section on
<a href="gvariant-format-strings.html#pointers"><code>GVariant</code> format strings</a>.</p>
      </div>

      <div class="docblock">
        
        <p>Available since: 2.24</p>
        
        
        <p>This method is not directly available to language bindings.</p>
        
        
      </div>

      
    </div>

    
    <div class="parameters toggle-wrapper">
      <h4 id="parameters">
        Parameters
        <a href="#parameters" class="anchor"></a>
      </h4>

      <div class="docblock">
        <dl class="arguments">
          
          <dt class="arg-name"><code>format_string</code></dt>
          <dd class="arg-description">
            <p><em>Type:</em>&nbsp;<code>const gchar*</code></p>
            <p>A GVariant format&nbsp;string.</p>
            <table>
            
            
            
            
            
            
            
            <tbody><tr><td title="transfer: none">The data is owned by the caller of the method.</td></tr>
            <tr><td>The value is a NUL terminated UTF-8 string.</td></tr>
            </tbody></table>
          </dd>
          
          <dt class="arg-name"><code>...</code></dt>
          <dd class="arg-description">
            <p><em>Type:</em>&nbsp;<code></code></p>
            <p>The arguments to unpack the value&nbsp;into.</p>
            <table>
            
            
            
            
            
            
            
            
            
            </table>
          </dd>
          

          
        </dl>
      </div>
    </div>
    

    
    <div class="return-value toggle-wrapper">
      <h4 id="return-value">
        Return value
        <a href="#return-value" class="anchor"></a>
      </h4>

      <div class="docblock">
        <div class="returns">
          <div class="arg-description">
            <p><em>Type:</em>&nbsp;<code>gboolean</code></p>
            <p><code>TRUE</code> if a value was unpacked, or <code>FALSE</code> if there as no&nbsp;value.</p>
          </div>
          <div>
            <table>
            
            
            
            
            
            
            </table>
          </div>
        </div>
      </div>
    </div>
    

  </section>
</section>


    

    <section id="search" class="content hidden"></section>

    <footer>
    
    </footer>
  </div>



</body><!-- Mirrored from docs.gtk.org/glib/method.VariantIter.next.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 24 Nov 2024 14:17:21 GMT --></html>